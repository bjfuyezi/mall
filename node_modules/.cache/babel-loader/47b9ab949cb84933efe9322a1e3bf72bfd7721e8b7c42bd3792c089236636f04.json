{"ast":null,"code":"import \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.find.js\";\nimport axios from 'axios';\nexport default {\n  name: 'AdList',\n  props: {\n    statusFilter: {\n      type: String,\n      default: 'all'\n    }\n  },\n  data() {\n    return {\n      ads: [],\n      loading: true,\n      statuses: [{\n        value: 'pending',\n        label: '待审核'\n      }, {\n        value: 'approved',\n        label: '已通过'\n      }, {\n        value: 'running',\n        label: '进行中'\n      }, {\n        value: 'rejected',\n        label: '被打回'\n      }, {\n        value: 'expired',\n        label: '已到期'\n      }]\n    };\n  },\n  watch: {\n    statusFilter: {\n      immediate: true,\n      handler(newVal) {\n        this.fetchAdsByStatus(newVal);\n      }\n    }\n  },\n  methods: {\n    statusLabel(i_status) {\n      const status = this.statuses.find(s => s.value === i_status);\n      return status ? status.label : i_status; // 如果没有找到匹配项，则显示原始状态值\n    },\n    async fetchAdsByStatus(status) {\n      try {\n        this.loading = true;\n        const response = await axios.get('http://localhost:8081/advertise/', {\n          params: {\n            status: status !== 'all' ? status : null\n          }\n        });\n        console.log(response);\n        this.ads = response.data;\n        console.log(response);\n      } catch (error) {\n        console.error(\"There was an error fetching the ads!\", error);\n      } finally {\n        this.loading = false;\n      }\n    },\n    handleAction(ad) {\n      // 这里可以添加处理广告的操作逻辑，比如编辑、删除等。\n      console.log('执行对广告的操作:', ad);\n    },\n    formatDate(dateString) {\n      const date = new Date(dateString);\n      return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')}`;\n    },\n    emitViewAdDetails(ad) {\n      this.$emit('viewAdDetails', ad); // 发出 viewAdDetails 事件\n    },\n    statusClass(status) {\n      // 将英文状态转换为小写并移除空格作为类名\n      console.log(status.toLowerCase().replace(/\\s+/g, ''));\n      return status.toLowerCase().replace(/\\s+/g, '');\n    }\n  }\n};","map":{"version":3,"names":["axios","name","props","statusFilter","type","String","default","data","ads","loading","statuses","value","label","watch","immediate","handler","newVal","fetchAdsByStatus","methods","statusLabel","i_status","status","find","s","response","get","params","console","log","error","handleAction","ad","formatDate","dateString","date","Date","getFullYear","getMonth","padStart","getDate","emitViewAdDetails","$emit","statusClass","toLowerCase","replace"],"sources":["src/components/AdList.vue"],"sourcesContent":["<template>\r\n  <div class=\"ad-list-container\">\r\n    <div v-if=\"loading\" class=\"loading\">加载中...</div>\r\n    <ul v-else-if=\"ads.length > 0\" class=\"ad-list\">\r\n      <li v-for=\"(ad, index) in ads\" :key=\"index\" class=\"ad-item\"  @click=\"emitViewAdDetails(ad)\">\r\n        <div class=\"ad-row\">\r\n          <span class=\"ad-name\">{{ ad.name }}</span>\r\n          <span class=\"ad-type\">{{ ad.advertisement_type === 'shop' ? '店铺推广' : '商品推广' }}</span>\r\n          <span class=\"ad-name\">{{ ad.advertisement_type === 'shop' ? ad.shop_name : ad.product_name }}</span>\r\n          <span class=\"ad-time\">{{ formatDate(ad.start_time) }}———{{ formatDate(ad.end_time) }}</span>\r\n          <strong class=\"ad-price\">{{ ad.price }}</strong>\r\n          <span :class=\"['ad-status', statusClass(ad.status)]\">{{ statusLabel(ad.status)  }}</span>\r\n        </div>\r\n        <div class=\"ad-actions\">\r\n          <button @click=\"handleAction(ad)\">修改信息</button>\r\n           <button @click=\"handleAction(ad)\">查看信息</button>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n    <div v-else class=\"no-ads\">没有找到符合条件的广告。</div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: 'AdList',\r\n  props: {\r\n    statusFilter: {\r\n      type: String,\r\n      default: 'all'\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      ads: [],\r\n      loading: true,\r\n       statuses: [\r\n        { value: 'pending', label: '待审核' },\r\n        { value: 'approved', label: '已通过' },\r\n        { value: 'running', label: '进行中' },\r\n        { value: 'rejected', label: '被打回' },\r\n        { value: 'expired', label: '已到期' }\r\n      ]\r\n    };\r\n  },\r\n  watch: {\r\n    statusFilter: {\r\n      immediate: true,\r\n      handler(newVal) {\r\n        this.fetchAdsByStatus(newVal);\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    statusLabel(i_status) {\r\n      const status = this.statuses.find(s => s.value === i_status);\r\n      return status ? status.label : i_status; // 如果没有找到匹配项，则显示原始状态值\r\n    },\r\n    async fetchAdsByStatus(status) {\r\n      try {\r\n        this.loading = true;\r\n        const response = await axios.get('http://localhost:8081/advertise/', {\r\n          params: {\r\n            status: status !== 'all' ? status : null\r\n          }\r\n        });\r\n        console.log(response)\r\n        this.ads = response.data; \r\n        console.log(response)\r\n      } catch (error) {\r\n        console.error(\"There was an error fetching the ads!\", error);\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n    handleAction(ad) {\r\n      // 这里可以添加处理广告的操作逻辑，比如编辑、删除等。\r\n      console.log('执行对广告的操作:', ad);\r\n    },\r\n    formatDate(dateString) {\r\n      const date = new Date(dateString);\r\n      return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')}`;\r\n    },emitViewAdDetails(ad) {\r\n      this.$emit('viewAdDetails', ad); // 发出 viewAdDetails 事件\r\n    },\r\n    statusClass(status) {\r\n      // 将英文状态转换为小写并移除空格作为类名\r\n      console.log(status.toLowerCase().replace(/\\s+/g, ''));\r\n      return status.toLowerCase().replace(/\\s+/g, '');\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.ad-list-container {\r\n  width: 100%;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n  background-color: #fff;\r\n  border-radius: 8px;\r\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.loading,\r\n.no-ads {\r\n  text-align: center;\r\n  padding: 20px;\r\n  font-size: 1.2em;\r\n}\r\n\r\n.ad-list {\r\n  list-style: none;\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n\r\n.ad-item {\r\n  display: flex;\r\n  align-items: center;\r\n  border-bottom: 1px solid #e0e0e0;\r\n  padding: 10px 0;\r\n}\r\n\r\n.ad-row {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  flex-wrap: nowrap;\r\n  width: 100%;\r\n}\r\n\r\n.ad-row span,\r\n.ad-row strong {\r\n  flex: 1 1 auto;\r\n  text-align: left;\r\n  padding: 0 5px;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.ad-row .ad-price {\r\n  flex: 0 0 100px; /* 固定宽度 */\r\n  font-size: 1.2em;\r\n  font-weight: bold;\r\n  color: #ff6700;\r\n}\r\n\r\n/* 如果需要更细粒度控制每列宽度，可以为每个 span 添加具体宽度 */\r\n.ad-row .ad-type {\r\n  flex: 0 0 100px;\r\n}\r\n\r\n.ad-row .ad-name {\r\n  flex: 1 1 100px;\r\n}\r\n\r\n.ad-row .ad-time {\r\n  flex: 0 0 300px;\r\n\r\n}\r\n\r\n.ad-row .ad-status {\r\n  flex: 0 0 100px;\r\n  padding: 0.5rem 1rem;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  color: #fff;\r\n  text-align: center;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  font-weight: bold;\r\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\r\n  margin: 0.5rem;\r\n  transition: background-color 0.3s ease;\r\n\r\n  &[disabled] {\r\n    opacity: 0.65;\r\n    cursor: not-allowed;\r\n  }\r\n}\r\n\r\n/* 不同状态的颜色 */\r\n.ad-status.rejected {\r\n  background-color: #d9534f;\r\n}\r\n.ad-status.pending {\r\n  background-color: #f0ad4e;\r\n}\r\n.ad-status.approved {\r\n  background-color: #5cb85c;\r\n}\r\n.ad-status.running {\r\n  background-color: #5bc0de;\r\n}\r\n.ad-status.expired {\r\n  background-color: #555;\r\n  color: #fff; /* 确保文本可见 */\r\n}\r\n\r\n.ad-actions {\r\nbutton {\r\n    padding: 0.5rem 1rem;\r\n    border: none;\r\n    border-radius: 4px;\r\n    cursor: pointer;\r\n    color: #fff;\r\n    background-color: #ff6700;\r\n    transition: background-color 0.3s ease;\r\n\r\n    &:hover {\r\n    background-color: darken(#ff6700, 10%);\r\n    }\r\n}\r\n}\r\n</style>"],"mappings":";;AAwBA,OAAAA,KAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACAC,YAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,OAAA;IACA;EACA;EACAC,KAAA;IACA;MACAC,GAAA;MACAC,OAAA;MACAC,QAAA,GACA;QAAAC,KAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,KAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,KAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,KAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,KAAA;QAAAC,KAAA;MAAA;IAEA;EACA;EACAC,KAAA;IACAV,YAAA;MACAW,SAAA;MACAC,QAAAC,MAAA;QACA,KAAAC,gBAAA,CAAAD,MAAA;MACA;IACA;EACA;EACAE,OAAA;IACAC,YAAAC,QAAA;MACA,MAAAC,MAAA,QAAAX,QAAA,CAAAY,IAAA,CAAAC,CAAA,IAAAA,CAAA,CAAAZ,KAAA,KAAAS,QAAA;MACA,OAAAC,MAAA,GAAAA,MAAA,CAAAT,KAAA,GAAAQ,QAAA;IACA;IACA,MAAAH,iBAAAI,MAAA;MACA;QACA,KAAAZ,OAAA;QACA,MAAAe,QAAA,SAAAxB,KAAA,CAAAyB,GAAA;UACAC,MAAA;YACAL,MAAA,EAAAA,MAAA,aAAAA,MAAA;UACA;QACA;QACAM,OAAA,CAAAC,GAAA,CAAAJ,QAAA;QACA,KAAAhB,GAAA,GAAAgB,QAAA,CAAAjB,IAAA;QACAoB,OAAA,CAAAC,GAAA,CAAAJ,QAAA;MACA,SAAAK,KAAA;QACAF,OAAA,CAAAE,KAAA,yCAAAA,KAAA;MACA;QACA,KAAApB,OAAA;MACA;IACA;IACAqB,aAAAC,EAAA;MACA;MACAJ,OAAA,CAAAC,GAAA,cAAAG,EAAA;IACA;IACAC,WAAAC,UAAA;MACA,MAAAC,IAAA,OAAAC,IAAA,CAAAF,UAAA;MACA,UAAAC,IAAA,CAAAE,WAAA,MAAA/B,MAAA,CAAA6B,IAAA,CAAAG,QAAA,QAAAC,QAAA,YAAAjC,MAAA,CAAA6B,IAAA,CAAAK,OAAA,IAAAD,QAAA;IACA;IAAAE,kBAAAT,EAAA;MACA,KAAAU,KAAA,kBAAAV,EAAA;IACA;IACAW,YAAArB,MAAA;MACA;MACAM,OAAA,CAAAC,GAAA,CAAAP,MAAA,CAAAsB,WAAA,GAAAC,OAAA;MACA,OAAAvB,MAAA,CAAAsB,WAAA,GAAAC,OAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}