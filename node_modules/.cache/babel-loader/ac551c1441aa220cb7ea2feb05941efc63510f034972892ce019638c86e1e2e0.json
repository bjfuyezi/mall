{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: 'ProductView',\n  data() {\n    return {\n      activeTab: 'description',\n      quantity: 1,\n      isFavorite: false,\n      product: {\n        id: 1,\n        name: '示例商品',\n        price: 999,\n        originalPrice: 1299,\n        mainImage: 'https://via.placeholder.com/400x400',\n        sales: 1000,\n        reviews: 500,\n        favorites: 200,\n        stock: 100,\n        description: '<p>这里是商品详细介绍...</p>',\n        reviewList: []\n      },\n      hotProducts: []\n    };\n  },\n  async created() {\n    try {\n      // 从路由获取商品ID\n      const productId = this.$route.params.id;\n\n      // 请求商品详情\n      const response = await this.$axios.get(`http://localhost:8081/product/show?id=${productId}`);\n      if (response.data.code === 200) {\n        // 合并API返回的数据和默认数据\n        this.product = {\n          ...this.product,\n          id: response.data.data.id,\n          name: response.data.data.name,\n          price: response.data.data.price,\n          mainImage: response.data.data.image || this.product.mainImage,\n          description: response.data.data.description || this.product.description,\n          stock: response.data.data.stock,\n          sales: response.data.data.sales || 0,\n          reviews: response.data.data.reviews || 0,\n          favorites: response.data.data.favorites || 0\n        };\n      } else {\n        throw new Error(response.data.message || '获取商品信息失败');\n      }\n    } catch (error) {\n      this.$message.error(error.message || '获取商品信息失败，请重试');\n      console.error('获取商品详情失败:', error);\n    }\n  },\n  methods: {\n    addToCart() {\n      this.$message.success('已添加到购物车');\n    },\n    toggleFavorite() {\n      this.isFavorite = !this.isFavorite;\n      this.$message.success(this.isFavorite ? '收藏成功' : '已取消收藏');\n    },\n    quickBuy() {\n      this.$router.push({\n        name: 'order-confirm',\n        query: {\n          productId: this.product.id,\n          quantity: this.quantity\n        }\n      });\n    },\n    previewImage(_url) {\n      this.$msgbox({\n        title: '图片预览',\n        message: ('img', {\n          attrs: {\n            src: _url,\n            style: 'max-width: 100%'\n          }\n        }),\n        showCancelButton: false,\n        confirmButtonText: '关闭'\n      });\n    }\n  }\n};","map":{"version":3,"names":["name","data","activeTab","quantity","isFavorite","product","id","price","originalPrice","mainImage","sales","reviews","favorites","stock","description","reviewList","hotProducts","created","productId","$route","params","response","$axios","get","code","image","Error","message","error","$message","console","methods","addToCart","success","toggleFavorite","quickBuy","$router","push","query","previewImage","_url","$msgbox","title","attrs","src","style","showCancelButton","confirmButtonText"],"sources":["src/views/ProductView.vue"],"sourcesContent":["<template>\r\n  <div class=\"product-page\">\r\n    <div class=\"product-container\">\r\n      <!-- 左侧区域 -->\r\n      <div class=\"product-left\">\r\n        <!-- 商品主要信息 -->\r\n        <div class=\"product-main\">\r\n          <div class=\"product-gallery\">\r\n            <img :src=\"product.mainImage\" :alt=\"product.name\">\r\n          </div>\r\n          <div class=\"product-info\">\r\n            <h1>{{ product.name }}</h1>\r\n            <div class=\"product-price\">\r\n              <span class=\"current-price\">¥{{ product.price.toFixed(2) }}</span>\r\n              <span class=\"original-price\" v-if=\"product.originalPrice\">\r\n                ¥{{ product.originalPrice.toFixed(2) }}\r\n              </span>\r\n            </div>\r\n            <div class=\"product-stats\">\r\n              <span>销量 {{ product.sales }}</span>\r\n              <span>评价 {{ product.reviews }}</span>\r\n              <span>收藏 {{ product.favorites }}</span>\r\n            </div>\r\n            <el-button \r\n              type=\"danger\" \r\n              class=\"quick-buy-btn\"\r\n              size=\"large\"\r\n              @click=\"quickBuy\"\r\n            >\r\n              立即购买\r\n            </el-button>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- 商品详情标签页 -->\r\n        <div class=\"product-tabs\">\r\n          <el-tabs v-model=\"activeTab\">\r\n            <el-tab-pane label=\"商品介绍\" name=\"description\">\r\n              <div class=\"product-description\">\r\n                <div v-html=\"product.description\"></div>\r\n              </div>\r\n            </el-tab-pane>\r\n            <el-tab-pane label=\"商品评价\" name=\"reviews\">\r\n              <div class=\"product-reviews\">\r\n                <div class=\"review-item\" v-for=\"review in product.reviewList\" :key=\"review.id\">\r\n                  <div class=\"review-header\">\r\n                    <img :src=\"review.userAvatar\" :alt=\"review.userName\">\r\n                    <span class=\"user-name\">{{ review.userName }}</span>\r\n                    <el-rate v-model=\"review.rating\" disabled></el-rate>\r\n                  </div>\r\n                  <div class=\"review-content\">{{ review.content }}</div>\r\n                  <div class=\"review-images\" v-if=\"review.images && review.images.length\">\r\n                    <img v-for=\"(img, index) in review.images\" \r\n                         :key=\"index\" \r\n                         :src=\"img\" \r\n                         @click=\"previewImage(img)\"\r\n                    >\r\n                  </div>\r\n                  <div class=\"review-time\">{{ review.time }}</div>\r\n                </div>\r\n              </div>\r\n            </el-tab-pane>\r\n          </el-tabs>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 右侧区域 -->\r\n      <div class=\"product-right\">\r\n        <!-- 购买操作区 -->\r\n        <div class=\"product-action\">\r\n          <div class=\"quantity-selector\">\r\n            <span>购买数量：</span>\r\n            <el-input-number \r\n              v-model=\"quantity\" \r\n              :min=\"1\" \r\n              :max=\"product.stock\"\r\n            ></el-input-number>\r\n          </div>\r\n          <div class=\"action-buttons\">\r\n            <el-button type=\"primary\" @click=\"addToCart\">加入购物车</el-button>\r\n            <el-button @click=\"toggleFavorite\">\r\n              <i :class=\"isFavorite ? 'el-icon-star-on' : 'el-icon-star-off'\"></i>\r\n              {{ isFavorite ? '已收藏' : '收藏' }}\r\n            </el-button>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- 热门商品推荐 -->\r\n        <div class=\"hot-products\">\r\n          <h3>热门商品</h3>\r\n          <div class=\"hot-product-list\">\r\n            <div \r\n              v-for=\"item in hotProducts\" \r\n              :key=\"item.id\"\r\n              class=\"hot-product-item\"\r\n              @click=\"$router.push(`/product/${item.id}`)\"\r\n            >\r\n              <img :src=\"item.image\" :alt=\"item.name\">\r\n              <div class=\"hot-product-info\">\r\n                <p class=\"name\">{{ item.name }}</p>\r\n                <p class=\"price\">¥{{ item.price.toFixed(2) }}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'ProductView',\r\n  data() {\r\n    return {\r\n      activeTab: 'description',\r\n      quantity: 1,\r\n      isFavorite: false,\r\n      product: {\r\n        id: 1,\r\n        name: '示例商品',\r\n        price: 999,\r\n        originalPrice: 1299,\r\n        mainImage: 'https://via.placeholder.com/400x400',\r\n        sales: 1000,\r\n        reviews: 500,\r\n        favorites: 200,\r\n        stock: 100,\r\n        description: '<p>这里是商品详细介绍...</p>',\r\n        reviewList: []\r\n      },\r\n      hotProducts: []\r\n    }\r\n  },\r\n  async created() {\r\n    try {\r\n      // 从路由获取商品ID\r\n      const productId = this.$route.params.id;\r\n      \r\n      // 请求商品详情\r\n      const response = await this.$axios.get(`http://localhost:8081/product/show?id=${productId}`);\r\n      \r\n      if (response.data.code === 200) {\r\n        // 合并API返回的数据和默认数据\r\n        this.product = {\r\n          ...this.product,\r\n          id: response.data.data.id,\r\n          name: response.data.data.name,\r\n          price: response.data.data.price,\r\n          mainImage: response.data.data.image || this.product.mainImage,\r\n          description: response.data.data.description || this.product.description,\r\n          stock: response.data.data.stock,\r\n          sales: response.data.data.sales || 0,\r\n          reviews: response.data.data.reviews || 0,\r\n          favorites: response.data.data.favorites || 0\r\n        };\r\n      } else {\r\n        throw new Error(response.data.message || '获取商品信息失败');\r\n      }\r\n    } catch (error) {\r\n      this.$message.error(error.message || '获取商品信息失败，请重试');\r\n      console.error('获取商品详情失败:', error);\r\n    }\r\n  },\r\n  methods: {\r\n    addToCart() {\r\n      this.$message.success('已添加到购物车')\r\n    },\r\n    toggleFavorite() {\r\n      this.isFavorite = !this.isFavorite\r\n      this.$message.success(this.isFavorite ? '收藏成功' : '已取消收藏')\r\n    },\r\n    quickBuy() {\r\n      this.$router.push({\r\n        name: 'order-confirm',\r\n        query: {\r\n          productId: this.product.id,\r\n          quantity: this.quantity\r\n        }\r\n      });\r\n    },\r\n    previewImage(_url) {\r\n      this.$msgbox({\r\n        title: '图片预览',\r\n        message: ('img', {\r\n          attrs: {\r\n            src: _url,\r\n            style: 'max-width: 100%'\r\n          }\r\n        }),\r\n        showCancelButton: false,\r\n        confirmButtonText: '关闭'\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.product-page {\r\n  background-color: #f5f5f5;\r\n  padding: 20px 0;\r\n}\r\n\r\n.product-container {\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  display: flex;\r\n  gap: 20px;\r\n}\r\n\r\n.product-left {\r\n  flex: 1;\r\n  min-width: 0;\r\n}\r\n\r\n.product-main {\r\n  background: white;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  margin-bottom: 20px;\r\n  display: flex;\r\n  gap: 20px;\r\n}\r\n\r\n.product-gallery {\r\n  width: 400px;\r\n  position: relative;\r\n  \r\n  img {\r\n    width: 100%;\r\n    height: auto;\r\n    border-radius: 4px;\r\n  }\r\n}\r\n\r\n.product-info {\r\n  flex: 1;\r\n\r\n  h1 {\r\n    font-size: 24px;\r\n    margin-bottom: 20px;\r\n  }\r\n\r\n  .product-price {\r\n    margin-bottom: 20px;\r\n\r\n    .current-price {\r\n      font-size: 28px;\r\n      color: #ff6700;\r\n      margin-right: 10px;\r\n    }\r\n\r\n    .original-price {\r\n      color: #999;\r\n      text-decoration: line-through;\r\n    }\r\n  }\r\n\r\n  .product-stats {\r\n    color: #666;\r\n    margin-bottom: 20px;\r\n    \r\n    span {\r\n      margin-right: 20px;\r\n    }\r\n  }\r\n\r\n  .quick-buy-btn {\r\n    width: 180px;\r\n    height: 48px;\r\n    font-size: 18px;\r\n    margin-top: 10px;\r\n  }\r\n}\r\n\r\n.product-tabs {\r\n  background: white;\r\n  border-radius: 8px;\r\n  padding: 20px;\r\n\r\n  .product-description {\r\n    padding: 20px 0;\r\n  }\r\n\r\n  .review-item {\r\n    padding: 20px 0;\r\n    border-bottom: 1px solid #eee;\r\n\r\n    .review-header {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 10px;\r\n      margin-bottom: 10px;\r\n\r\n      img {\r\n        width: 40px;\r\n        height: 40px;\r\n        border-radius: 50%;\r\n      }\r\n    }\r\n\r\n    .review-images {\r\n      display: flex;\r\n      gap: 10px;\r\n      margin: 10px 0;\r\n\r\n      img {\r\n        width: 100px;\r\n        height: 100px;\r\n        object-fit: cover;\r\n        cursor: pointer;\r\n      }\r\n    }\r\n\r\n    .review-time {\r\n      color: #999;\r\n      font-size: 12px;\r\n    }\r\n  }\r\n}\r\n\r\n.product-right {\r\n  width: 300px;\r\n}\r\n\r\n.product-action {\r\n  background: white;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  margin-bottom: 20px;\r\n\r\n  .quantity-selector {\r\n    margin-bottom: 20px;\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 10px;\r\n  }\r\n\r\n  .action-buttons {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 10px;\r\n\r\n    .el-button {\r\n      width: 100%;\r\n    }\r\n  }\r\n}\r\n\r\n.hot-products {\r\n  background: white;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n\r\n  h3 {\r\n    margin-bottom: 15px;\r\n    font-size: 16px;\r\n  }\r\n\r\n  .hot-product-item {\r\n    display: flex;\r\n    gap: 10px;\r\n    padding: 10px 0;\r\n    cursor: pointer;\r\n\r\n    &:hover {\r\n      background: #f9f9f9;\r\n    }\r\n\r\n    img {\r\n      width: 80px;\r\n      height: 80px;\r\n      object-fit: cover;\r\n      border-radius: 4px;\r\n    }\r\n\r\n    .hot-product-info {\r\n      flex: 1;\r\n\r\n      .name {\r\n        margin-bottom: 5px;\r\n        font-size: 14px;\r\n      }\r\n\r\n      .price {\r\n        color: #ff6700;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style> "],"mappings":";AA+GA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,SAAA;MACAC,QAAA;MACAC,UAAA;MACAC,OAAA;QACAC,EAAA;QACAN,IAAA;QACAO,KAAA;QACAC,aAAA;QACAC,SAAA;QACAC,KAAA;QACAC,OAAA;QACAC,SAAA;QACAC,KAAA;QACAC,WAAA;QACAC,UAAA;MACA;MACAC,WAAA;IACA;EACA;EACA,MAAAC,QAAA;IACA;MACA;MACA,MAAAC,SAAA,QAAAC,MAAA,CAAAC,MAAA,CAAAd,EAAA;;MAEA;MACA,MAAAe,QAAA,cAAAC,MAAA,CAAAC,GAAA,0CAAAL,SAAA;MAEA,IAAAG,QAAA,CAAApB,IAAA,CAAAuB,IAAA;QACA;QACA,KAAAnB,OAAA;UACA,QAAAA,OAAA;UACAC,EAAA,EAAAe,QAAA,CAAApB,IAAA,CAAAA,IAAA,CAAAK,EAAA;UACAN,IAAA,EAAAqB,QAAA,CAAApB,IAAA,CAAAA,IAAA,CAAAD,IAAA;UACAO,KAAA,EAAAc,QAAA,CAAApB,IAAA,CAAAA,IAAA,CAAAM,KAAA;UACAE,SAAA,EAAAY,QAAA,CAAApB,IAAA,CAAAA,IAAA,CAAAwB,KAAA,SAAApB,OAAA,CAAAI,SAAA;UACAK,WAAA,EAAAO,QAAA,CAAApB,IAAA,CAAAA,IAAA,CAAAa,WAAA,SAAAT,OAAA,CAAAS,WAAA;UACAD,KAAA,EAAAQ,QAAA,CAAApB,IAAA,CAAAA,IAAA,CAAAY,KAAA;UACAH,KAAA,EAAAW,QAAA,CAAApB,IAAA,CAAAA,IAAA,CAAAS,KAAA;UACAC,OAAA,EAAAU,QAAA,CAAApB,IAAA,CAAAA,IAAA,CAAAU,OAAA;UACAC,SAAA,EAAAS,QAAA,CAAApB,IAAA,CAAAA,IAAA,CAAAW,SAAA;QACA;MACA;QACA,UAAAc,KAAA,CAAAL,QAAA,CAAApB,IAAA,CAAA0B,OAAA;MACA;IACA,SAAAC,KAAA;MACA,KAAAC,QAAA,CAAAD,KAAA,CAAAA,KAAA,CAAAD,OAAA;MACAG,OAAA,CAAAF,KAAA,cAAAA,KAAA;IACA;EACA;EACAG,OAAA;IACAC,UAAA;MACA,KAAAH,QAAA,CAAAI,OAAA;IACA;IACAC,eAAA;MACA,KAAA9B,UAAA,SAAAA,UAAA;MACA,KAAAyB,QAAA,CAAAI,OAAA,MAAA7B,UAAA;IACA;IACA+B,SAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;QACArC,IAAA;QACAsC,KAAA;UACApB,SAAA,OAAAb,OAAA,CAAAC,EAAA;UACAH,QAAA,OAAAA;QACA;MACA;IACA;IACAoC,aAAAC,IAAA;MACA,KAAAC,OAAA;QACAC,KAAA;QACAf,OAAA;UACAgB,KAAA;YACAC,GAAA,EAAAJ,IAAA;YACAK,KAAA;UACA;QACA;QACAC,gBAAA;QACAC,iBAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}