{"ast":null,"code":"import \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport axios from \"axios\";\nimport AddCoupon from './AddCoupon.vue';\nimport moment from \"moment/moment\";\nexport default {\n  name: 'UserCouponView',\n  components: {\n    AddCoupon\n  },\n  data() {\n    return {\n      activeTab: 'all',\n      //默认为all\n      userId: null,\n      platformCoupons: [],\n      showCoupons: [],\n      //展示的优惠券\n      selectIndex: 0,\n      selectRow: [],\n      showAddCouponDialog: false,\n      loading: false,\n      platformCouponDialogVisible: false,\n      // 平台券弹窗是否显示\n      shopCouponDialogVisible: false,\n      // 店铺券弹窗是否显示\n      platformScopeData: [],\n      //存储返回来的平台券范围\n      shopScopeData: [],\n      confirmDeleteDialogVisible: false,\n      editPendingCouponDialogVisible: false,\n      editActiveCouponDialogVisible: false,\n      editCouponForm: {\n        coupon_id: null,\n        start_time: '',\n        end_time: '',\n        scope: '',\n        request: 0,\n        off: 0,\n        total: 0,\n        claim_limit: 0,\n        max_unused_count: 0\n      },\n      pauseCouponDialogVisible: false,\n      resumeCouponDialogVisible: false\n    };\n  },\n  computed: {},\n  methods: {\n    // 重新加载优惠券列表\n    async refreshCoupons() {\n      this.loading = true;\n      try {\n        const response = await axios.get('http://localhost:8081/coupon/platform');\n        if (response.data != null) {\n          this.platformCoupons = response.data;\n          if (this.activeTab === 'all') {\n            this.showCoupons = this.platformCoupons; // 更新显示的优惠券列表\n          } else {\n            this.showCoupons = this.platformCoupons.filter(item => item.coupon_status === this.activeTab);\n          }\n        }\n      } catch (error) {\n        console.error(\"重新加载优惠券数据失败\", error);\n        this.$message.error('重新加载优惠券数据失败: ' + error.response.data);\n      } finally {\n        this.loading = false;\n      }\n    },\n    addComplete() {\n      this.showAddCouponDialog = false;\n      this.refreshCoupons(); // 重新加载优惠券列表\n    },\n    confirmDeleteCoupon(row, index) {\n      this.selectRow = row;\n      this.selectIndex = index;\n      this.confirmDeleteDialogVisible = true;\n    },\n    async deleteCouponConfirm() {\n      const couponId = this.selectRow.coupon_id;\n      try {\n        const response = await axios.delete(`http://localhost:8081/coupon/delete/${couponId}`);\n        if (response.status === 200) {\n          this.$message.success('优惠券删除成功');\n          await this.refreshCoupons(); // 重新加载优惠券列表\n          this.showCoupons = this.activeTab === 'all' ? this.platformCoupons : this.platformCoupons.filter(item => item.coupon_status === this.activeTab);\n        } else {\n          this.$message.error('优惠券删除失败');\n        }\n      } catch (error) {\n        this.$message.error(error.response.data);\n      } finally {\n        this.confirmDeleteDialogVisible = false;\n      }\n    },\n    editCoupon(row, index) {\n      this.selectRow = row;\n      this.selectIndex = index;\n      this.editCouponForm = {\n        ...row\n      }; // 深拷贝行数据到表单\n      this.editPendingCouponDialogVisible = true;\n    },\n    editCoupon2(row, index) {\n      this.selectRow = row;\n      this.selectIndex = index;\n      this.editCouponForm = {\n        ...row\n      }; // 深拷贝行数据到表单\n      this.editActiveCouponDialogVisible = true;\n    },\n    submitEditPendingCoupon() {\n      this.$refs.editPendingCouponForm.validate(async valid => {\n        if (valid) {\n          try {\n            const couponData = {\n              \"coupon_id\": this.editCouponForm.coupon_id,\n              \"start_time\": moment(this.editCouponForm.start_time).format('YYYY-MM-DD HH:mm:ss'),\n              \"end_time\": moment(this.editCouponForm.end_time).format('YYYY-MM-DD HH:mm:ss'),\n              \"request\": this.editCouponForm.request,\n              \"off\": this.editCouponForm.off,\n              \"total\": this.editCouponForm.total,\n              \"claim_limit\": this.editCouponForm.claim_limit,\n              \"max_unused_count\": this.editCouponForm.max_unused_count\n            };\n            const response = await axios.post('http://localhost:8081/coupon/update/pending', couponData);\n            if (response.status === 200) {\n              this.$message.success('未生效优惠券修改成功');\n              this.editPendingCouponDialogVisible = false;\n              await this.refreshCoupons(); // 重新加载优惠券列表\n            } else {\n              this.$message.error(response.data);\n            }\n          } catch (error) {\n            this.$message.error('未生效优惠券修改失败: ' + error.response.data);\n          }\n        }\n      });\n    },\n    submitEditActiveCoupon() {\n      this.$refs.editActiveCouponForm.validate(async valid => {\n        if (valid) {\n          try {\n            const couponData = {\n              \"coupon_id\": this.editCouponForm.coupon_id,\n              \"total\": this.editCouponForm.total,\n              \"claim_limit\": this.editCouponForm.claim_limit,\n              \"max_unused_count\": this.editCouponForm.max_unused_count\n            };\n            const response = await axios.post('http://localhost:8081/coupon/update/active', couponData);\n            if (response.status === 200) {\n              this.$message.success('已生效优惠券修改成功');\n              this.editActiveCouponDialogVisible = false;\n              await this.refreshCoupons(); // 重新加载优惠券列表\n            } else {\n              this.$message.error(response.data);\n            }\n          } catch (error) {\n            this.$message.error('已生效优惠券修改失败: ' + error.response.data);\n          }\n        }\n      });\n    },\n    pauseCoupon(row, index) {\n      this.selectRow = row;\n      this.selectIndex = index;\n      this.pauseCouponDialogVisible = true;\n    },\n    submitPauseCoupon() {\n      const couponId = this.selectRow.coupon_id;\n      axios.put(`http://localhost:8081/coupon/pause?coupon_id=${couponId}`).then(response => {\n        if (response.status === 200) {\n          this.$message.success('优惠券暂停发放成功');\n          this.pauseCouponDialogVisible = false;\n          this.refreshCoupons(); // 重新加载优惠券列表\n        } else {\n          this.$message.error(response.data);\n        }\n      }).catch(error => {\n        this.$message.error('优惠券暂停发放失败: ' + error.response.data);\n      });\n    },\n    resumeCoupon(row, index) {\n      this.selectRow = row;\n      this.selectIndex = index;\n      this.resumeCouponDialogVisible = true;\n    },\n    submitResumeCoupon() {\n      const couponId = this.selectRow.coupon_id;\n      axios.put(`http://localhost:8081/coupon/resume?coupon_id=${couponId}`).then(response => {\n        if (response.status === 200) {\n          this.$message.success('优惠券恢复领取成功');\n          this.resumeCouponDialogVisible = false;\n          this.refreshCoupons(); // 重新加载优惠券列表\n        } else {\n          this.$message.error(response.data);\n        }\n      }).catch(error => {\n        this.$message.error('优惠券恢复领取失败: ' + error.response.data);\n      });\n    },\n    // 获取优惠券数据\n    async getAllPlatformCoupons() {\n      this.loading = true;\n      this.user_id = this.$store.getters.userId;\n      console.log(\"当前用户id为：\" + this.user_id);\n      try {\n        const platformCouponsResponse = await axios.get('http://localhost:8081/coupon/platform');\n        if (platformCouponsResponse.data != null) {\n          this.platformCoupons = platformCouponsResponse.data;\n          console.log(\"platform:\", this.platformCoupons);\n          //不需要扁平化\n          this.showCoupons = this.platformCoupons;\n        }\n      } catch (error) {\n        console.error(\"获取平台优惠券数据失败\", error);\n      } finally {\n        this.loading = false;\n      }\n    },\n    handleTabClick(tab) {\n      const status = tab.name;\n      if (status === 'all') {\n        this.showCoupons = this.platformCoupons;\n      } else {\n        this.showCoupons = this.platformCoupons.filter(item => item.coupon_status === status);\n      }\n    },\n    numberFormatter(row, column, value) {\n      return `${value.toFixed(2)}`;\n    },\n    // 金额格式化函数，将数字格式化为人民币形式\n    currencyFormatter(row, column, value) {\n      // 保留两位小数并添加人民币符号\n      return `￥${value.toFixed(2)}`;\n    },\n    // 券的状态\n    statusFormatter(row, column, value) {\n      if (value === 'Pending') {\n        return \"待生效\";\n      } else if (value === 'Active') {\n        return \"可领取\";\n      } else if (value === 'Paused') {\n        return \"暂停领取\";\n      } else if (value === 'Expired') {\n        return \"已失效\";\n      } else {\n        return \"未知状态\";\n      }\n    },\n    // 查看券的可用范围\n    async viewCouponRange(row, index) {\n      this.selectIndex = index + 1;\n      const couponId = row.coupon_id; // 获取当前行的 coupon_id\n      try {\n        const response = await axios.get(`http://localhost:8081/userCoupon/scope/details?coupon_id=${couponId}`);\n        const scopeDetails = response.data;\n        // 这里只有平台券\n        this.platformScopeData = scopeDetails.platform || [];\n        console.log(\"platform:\", this.platformScopeData);\n        this.platformCouponDialogVisible = true; // 显示平台券弹窗\n\n        // 这里只有店铺券\n        // this.shopScopeData = scopeDetails.shop || [];\n        // console.log(\"shop:\",this.shopScopeData);\n        // this.shopCouponDialogVisible = true; // 显示店铺券弹窗\n      } catch (error) {\n        console.error(\"获取范围数据失败:\", error);\n      }\n    },\n    // 清空平台券数据\n    clearPlatformScopeData() {\n      this.platformScopeData = [];\n    },\n    // 清空店铺券数据\n    clearShopScopeData() {\n      this.shopScopeData = [];\n    },\n    parseJson(str) {\n      return JSON.parse(str);\n    }\n  },\n  created() {\n    console.log('平台优惠券数据加载开始');\n    this.getAllPlatformCoupons();\n    console.log('平台优惠券数据加载完成');\n    // 模拟从后端获取数据\n    this.loading = false;\n  }\n};","map":{"version":3,"names":["axios","AddCoupon","moment","name","components","data","activeTab","userId","platformCoupons","showCoupons","selectIndex","selectRow","showAddCouponDialog","loading","platformCouponDialogVisible","shopCouponDialogVisible","platformScopeData","shopScopeData","confirmDeleteDialogVisible","editPendingCouponDialogVisible","editActiveCouponDialogVisible","editCouponForm","coupon_id","start_time","end_time","scope","request","off","total","claim_limit","max_unused_count","pauseCouponDialogVisible","resumeCouponDialogVisible","computed","methods","refreshCoupons","response","get","filter","item","coupon_status","error","console","$message","addComplete","confirmDeleteCoupon","row","index","deleteCouponConfirm","couponId","delete","status","success","editCoupon","editCoupon2","submitEditPendingCoupon","$refs","editPendingCouponForm","validate","valid","couponData","format","post","submitEditActiveCoupon","editActiveCouponForm","pauseCoupon","submitPauseCoupon","put","then","catch","resumeCoupon","submitResumeCoupon","getAllPlatformCoupons","user_id","$store","getters","log","platformCouponsResponse","handleTabClick","tab","numberFormatter","column","value","toFixed","currencyFormatter","statusFormatter","viewCouponRange","scopeDetails","platform","clearPlatformScopeData","clearShopScopeData","parseJson","str","JSON","parse","created"],"sources":["src/views/admin/CouponManageView.vue"],"sourcesContent":["<template>\r\n  <div class=\"user-coupons-container\">\r\n    <div class=\"user-coupons-page\">\r\n      <div class=\"coupons-container\">\r\n        <div style=\"display: flex; justify-content: space-between; align-items: center;\">\r\n          <h2>平台发布的优惠券</h2>\r\n          <el-button\r\n              type=\"primary\"\r\n              icon=\"el-icon-plus\"\r\n              @click=\"showAddCouponDialog=true\"\r\n              style=\"margin-left: auto;\"\r\n          >\r\n            发布新的优惠券\r\n          </el-button>\r\n          <el-dialog :visible.sync=\"showAddCouponDialog\" title=\"添加优惠券\" width=\"50%\">\r\n            <add-coupon @close=\"addComplete()\" />\r\n          </el-dialog>\r\n        </div>\r\n\r\n        <!-- 优惠券状态标签 -->\r\n        <div class=\"coupon-tabs\">\r\n          <el-tabs v-model=\"activeTab\" @tab-click=\"handleTabClick\">\r\n            <el-tab-pane label=\"全部\" name=\"all\"></el-tab-pane>\r\n            <el-tab-pane label=\"待生效\" name=\"Pending\"></el-tab-pane>\r\n            <el-tab-pane label=\"可领取\" name=\"Active\"></el-tab-pane>\r\n            <el-tab-pane label=\"暂停领取\" name=\"Paused\"></el-tab-pane>\r\n            <el-tab-pane label=\"已失效\" name=\"Expired\"></el-tab-pane>\r\n          </el-tabs>\r\n        </div>\r\n\r\n        <!-- 优惠券列表 -->\r\n        <div v-if=\"showCoupons.length > 0\">\r\n          <!-- 判断 showUserCoupons 是否有数据，若有则渲染表格 -->\r\n          <el-table :data=\"showCoupons\" border stripe style=\"width: 100%; table-layout: auto;margin: 0 auto;\">\r\n            <!-- 序号列 -->\r\n            <el-table-column\r\n                label=\"序号\"\r\n                type=\"index\"\r\n                span=\"2\"\r\n                :index=\"(index) => index + 1\"\r\n            ></el-table-column>\r\n\r\n            <!-- 门槛金额列 -->\r\n            <!-- prop=\"request\"  显示 'request' 属性值 -->\r\n            <!-- :formatter=\"currencyFormatter\"  使用 currencyFormatter 格式化为货币 -->\r\n            <el-table-column\r\n                label=\"门槛金额\"\r\n                prop=\"request\"\r\n                span=\"3\"\r\n                :formatter=\"currencyFormatter\"\r\n            >\r\n            </el-table-column>\r\n\r\n            <!-- 折扣金额列 -->\r\n            <!-- prop=\"off\"  显示 'off' 属性值 -->\r\n            <!-- :formatter=\"currencyFormatter\"  使用 currencyFormatter 格式化为货币 -->\r\n            <el-table-column\r\n                label=\"折扣金额\"\r\n                prop=\"off\"\r\n                span=\"3\"\r\n                :formatter=\"currencyFormatter\"\r\n            >\r\n            </el-table-column>\r\n\r\n            <!-- 有效期列 -->\r\n            <el-table-column\r\n                label=\"有效期\"\r\n                span=\"6\"\r\n                min-width=\"200\"\r\n            >\r\n              <!-- 使用 slot-scope 渲染每一行的开始和结束时间 -->\r\n              <template slot-scope=\"scope\">\r\n                {{ scope.row.start_time }} - {{ scope.row.end_time }} <!-- 显示有效期 -->\r\n              </template>\r\n            </el-table-column>\r\n\r\n            <el-table-column\r\n                label=\"券的库存数量\"\r\n                prop=\"total\"\r\n                span=\"3\"\r\n            >\r\n            </el-table-column>\r\n            <el-table-column\r\n                label=\"领取上限\"\r\n                prop=\"claim_limit\"\r\n                span=\"3\"\r\n            >\r\n            </el-table-column>\r\n            <el-table-column\r\n                label=\"存放上限\"\r\n                prop=\"max_unused_count\"\r\n                span=\"3\"\r\n            >\r\n            </el-table-column>\r\n\r\n            <el-table-column\r\n                label=\"状态\"\r\n                prop=\"coupon_status\"\r\n                span=\"3\"\r\n                :formatter=\"statusFormatter\"\r\n            >\r\n            </el-table-column>\r\n            <!-- 操作列，展示查看范围按钮 -->\r\n            <el-table-column\r\n                label=\"操作\"\r\n                span=\"4\"\r\n                min-width=\"150\"\r\n            >\r\n              <template slot-scope=\"scope\">\r\n                <el-button-group>\r\n                  <!-- 按钮点击事件调用 viewCouponRange 方法 -->\r\n                  <el-button @click=\"viewCouponRange(scope.row,scope.$index)\" type=\"info\" size=\"small\" >查看范围</el-button>\r\n                  <el-button @click=\"confirmDeleteCoupon(scope.row, scope.$index)\" type=\"danger\" size=\"small\" >删除</el-button>\r\n                  <div v-if=\"scope.row.coupon_status === 'Pending'\">\r\n                    <el-button @click=\"editCoupon(scope.row, scope.$index)\" type=\"primary\" size=\"small\" >更新</el-button>\r\n                  </div>\r\n                  <div v-else-if=\"scope.row.coupon_status === 'Active'\">\r\n                    <el-button @click=\"editCoupon2(scope.row, scope.$index)\" type=\"primary\" size=\"small\" >更新</el-button>\r\n                    <el-button @click=\"pauseCoupon(scope.row, scope.$index)\" type=\"warning\" size=\"small\" >暂停领取</el-button>\r\n                  </div>\r\n                  <div v-else-if=\"scope.row.coupon_status === 'Paused'\">\r\n                    <el-button @click=\"resumeCoupon(scope.row, scope.$index)\" type=\"warning\" size=\"small\" >恢复领取</el-button>\r\n                  </div>\r\n                </el-button-group>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n        </div>\r\n\r\n        <!-- 空状态 -->\r\n        <div v-else class=\"empty-state\">\r\n          <i class=\"el-icon-s-ticket\"></i>\r\n          <p>没有优惠券需要管理</p>\r\n        </div>\r\n\r\n        <!-- 弹窗1：平台券范围展示 -->\r\n        <el-dialog\r\n            :visible.sync=\"platformCouponDialogVisible\"\r\n            title=\"平台券范围展示\"\r\n            width=\"60%\"\r\n            @close=\"clearPlatformScopeData\"\r\n        >\r\n          <div v-if=\"platformScopeData.length > 0\">\r\n            <h3>序号为{{this.selectIndex}}的优惠券的可用店铺信息如下</h3>\r\n            <el-table :data=\"platformScopeData\" style=\"width: 100%\" border stripe>\r\n              <el-table-column label=\"店铺名\" prop=\"shop_name\"></el-table-column>\r\n              <el-table-column label=\"描述\" prop=\"shop_description\"></el-table-column>\r\n              <el-table-column label=\"位置\" prop=\"location\"></el-table-column>\r\n              <el-table-column label=\"店铺评分\" prop=\"level\"></el-table-column>\r\n              <el-table-column label=\"状态\" prop=\"status\"></el-table-column>\r\n            </el-table>\r\n          </div>\r\n          <div v-else>\r\n            <p>没有可用范围。</p>\r\n          </div>\r\n          <span slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button @click=\"platformCouponDialogVisible = false\">关闭</el-button>\r\n          </span>\r\n        </el-dialog>\r\n\r\n        <!-- 弹窗2：店铺券范围展示 -->\r\n        <el-dialog\r\n            :visible.sync=\"shopCouponDialogVisible\"\r\n            title=\"店铺券范围展示\"\r\n            width=\"60%\"\r\n            @close=\"clearShopScopeData\"\r\n        >\r\n          <div v-if=\"shopScopeData.length > 0\">\r\n            <h3>序号为{{this.selectIndex}}的优惠券的可用商品信息如下</h3>\r\n            <el-table :data=\"shopScopeData\" style=\"width: 100%\" border stripe>\r\n              <el-table-column label=\"产品名\" prop=\"name\"></el-table-column>\r\n              <el-table-column label=\"分类\" prop=\"category\"></el-table-column>\r\n              <el-table-column label=\"价格\" prop=\"price\"></el-table-column>\r\n              <el-table-column label=\"描述\" prop=\"price\"></el-table-column>\r\n              <el-table-column label=\"库存\">\r\n                <template slot-scope=\"scope\">\r\n                  <div>\r\n                    <div v-if=\"scope.row.quantity && scope.row.quantity.length>0\">\r\n                      <div v-for=\"(item, index) in parseJson(scope.row.quantity)\" :key=\"index\">\r\n                        <span>{{ item.flavor }}: {{ item.quantity }} {{ scope.row.unit }}</span>\r\n                      </div>\r\n                    </div>\r\n                    <div v-else>无库存</div>\r\n                  </div>\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column label=\"状态\" prop=\"status\"></el-table-column>\r\n              <!-- 根据需要展示更多内容 -->\r\n            </el-table>\r\n          </div>\r\n          <div v-else>\r\n            <p>没有可用范围。</p>\r\n          </div>\r\n          <span slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button @click=\"shopCouponDialogVisible = false\">关闭</el-button>\r\n          </span>\r\n        </el-dialog>\r\n\r\n        <!-- 确认删除对话框 -->\r\n        <el-dialog :visible.sync=\"confirmDeleteDialogVisible\" title=\"确认删除\" width=\"30%\">\r\n          <p>确定要删除序号为 {{ selectIndex + 1 }} 的优惠券吗？</p>\r\n          <span slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button @click=\"confirmDeleteDialogVisible = false\">取 消</el-button>\r\n            <el-button type=\"primary\" @click=\"deleteCouponConfirm\">确 定</el-button>\r\n          </span>\r\n        </el-dialog>\r\n\r\n        <!-- 编辑未生效优惠券对话框 -->\r\n        <el-dialog :visible.sync=\"editPendingCouponDialogVisible\" title=\"编辑未生效优惠券\" width=\"50%\">\r\n          <p>修改序号为 {{ selectIndex + 1 }} 的优惠券</p>\r\n          <el-form ref=\"editPendingCouponForm\" :model=\"editCouponForm\" label-width=\"120px\">\r\n            <el-form-item label=\"开始时间\">\r\n              <el-date-picker\r\n                  v-model=\"editCouponForm.start_time\"\r\n                  type=\"datetime\"\r\n                  format=\"yyyy-MM-dd HH:mm:ss\"\r\n                  value-format=\"yyyy-MM-dd HH:mm:ss\"\r\n              ></el-date-picker>\r\n            </el-form-item>\r\n            <el-form-item label=\"结束时间\">\r\n              <el-date-picker\r\n                  v-model=\"editCouponForm.end_time\"\r\n                  type=\"datetime\"\r\n                  format=\"yyyy-MM-dd HH:mm:ss\"\r\n                  value-format=\"yyyy-MM-dd HH:mm:ss\"\r\n              ></el-date-picker>\r\n            </el-form-item>\r\n            <el-form-item label=\"最低消费\">\r\n              <el-input-number v-model=\"editCouponForm.request\" :min=\"0\" :step=\"0.01\" :precision=\"2\"></el-input-number>\r\n            </el-form-item>\r\n            <el-form-item label=\"满减金额\">\r\n              <el-input-number v-model=\"editCouponForm.off\" :min=\"0\" :step=\"0.01\" :precision=\"2\"></el-input-number>\r\n            </el-form-item>\r\n            <el-form-item label=\"总数量\">\r\n              <el-input-number v-model=\"editCouponForm.total\" :min=\"0\"></el-input-number>\r\n            </el-form-item>\r\n            <el-form-item label=\"限制领取数量\">\r\n              <el-input-number v-model=\"editCouponForm.claim_limit\" :min=\"0\"></el-input-number>\r\n            </el-form-item>\r\n            <el-form-item label=\"单用户未使用数量\">\r\n              <el-input-number v-model=\"editCouponForm.max_unused_count\" :min=\"0\"></el-input-number>\r\n            </el-form-item>\r\n          </el-form>\r\n          <span slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button @click=\"editPendingCouponDialogVisible = false\">取 消</el-button>\r\n            <el-button type=\"primary\" @click=\"submitEditPendingCoupon\">确 定</el-button>\r\n          </span>\r\n        </el-dialog>\r\n\r\n        <!-- 编辑已生效优惠券对话框 -->\r\n        <el-dialog :visible.sync=\"editActiveCouponDialogVisible\" title=\"编辑已生效优惠券\" width=\"50%\">\r\n          <p>修改序号为 {{ selectIndex + 1 }} 的优惠券</p>\r\n          <el-form ref=\"editActiveCouponForm\" :model=\"editCouponForm\" label-width=\"120px\">\r\n            <el-form-item label=\"总数量\">\r\n              <el-input-number v-model=\"editCouponForm.total\" :min=\"0\"></el-input-number>\r\n            </el-form-item>\r\n            <el-form-item label=\"限制领取数量\">\r\n              <el-input-number v-model=\"editCouponForm.claim_limit\" :min=\"0\"></el-input-number>\r\n            </el-form-item>\r\n            <el-form-item label=\"单用户未使用数量\">\r\n              <el-input-number v-model=\"editCouponForm.max_unused_count\" :min=\"0\"></el-input-number>\r\n            </el-form-item>\r\n          </el-form>\r\n          <span slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button @click=\"editActiveCouponDialogVisible = false\">取 消</el-button>\r\n            <el-button type=\"primary\" @click=\"submitEditActiveCoupon\">确 定</el-button>\r\n          </span>\r\n        </el-dialog>\r\n\r\n        <!-- 暂停优惠券确认对话框 -->\r\n        <el-dialog :visible.sync=\"pauseCouponDialogVisible\" title=\"暂停优惠券\" width=\"30%\">\r\n          <p>确定要暂停序号为 {{ selectIndex + 1 }} 的优惠券吗？</p>\r\n          <span slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button @click=\"pauseCouponDialogVisible = false\">取 消</el-button>\r\n            <el-button type=\"primary\" @click=\"submitPauseCoupon\">确 定</el-button>\r\n          </span>\r\n        </el-dialog>\r\n\r\n        <!-- 恢复优惠券确认对话框 -->\r\n        <el-dialog :visible.sync=\"resumeCouponDialogVisible\" title=\"恢复优惠券\" width=\"30%\">\r\n          <p>确定要恢复序号为 {{ selectIndex + 1 }} 的优惠券吗？</p>\r\n          <span slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button @click=\"resumeCouponDialogVisible = false\">取 消</el-button>\r\n            <el-button type=\"primary\" @click=\"submitResumeCoupon\">确 定</el-button>\r\n          </span>\r\n        </el-dialog>\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport AddCoupon from './AddCoupon.vue';\r\nimport moment from \"moment/moment\";\r\nexport default {\r\n  name: 'UserCouponView',\r\n  components: {\r\n    AddCoupon\r\n  },\r\n  data() {\r\n    return {\r\n      activeTab: 'all',//默认为all\r\n      userId : null,\r\n      platformCoupons:[],\r\n      showCoupons:[],//展示的优惠券\r\n      selectIndex:0,\r\n      selectRow:[],\r\n      showAddCouponDialog: false,\r\n      loading :false,\r\n      platformCouponDialogVisible: false, // 平台券弹窗是否显示\r\n      shopCouponDialogVisible: false, // 店铺券弹窗是否显示\r\n      platformScopeData:[],//存储返回来的平台券范围\r\n      shopScopeData:[],\r\n      confirmDeleteDialogVisible:false,\r\n      editPendingCouponDialogVisible: false,\r\n      editActiveCouponDialogVisible: false,\r\n      editCouponForm: {\r\n        coupon_id: null,\r\n        start_time: '',\r\n        end_time: '',\r\n        scope: '',\r\n        request: 0,\r\n        off: 0,\r\n        total: 0,\r\n        claim_limit: 0,\r\n        max_unused_count: 0\r\n      },\r\n      pauseCouponDialogVisible: false,\r\n      resumeCouponDialogVisible: false,\r\n    }\r\n  },\r\n  computed:{\r\n\r\n  },\r\n  methods:{\r\n    // 重新加载优惠券列表\r\n    async refreshCoupons() {\r\n      this.loading = true;\r\n      try {\r\n        const response = await axios.get('http://localhost:8081/coupon/platform');\r\n        if (response.data != null) {\r\n          this.platformCoupons = response.data;\r\n          if(this.activeTab==='all'){\r\n            this.showCoupons = this.platformCoupons; // 更新显示的优惠券列表\r\n          }else {\r\n            this.showCoupons = this.platformCoupons\r\n                .filter(item => item.coupon_status===this.activeTab);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error(\"重新加载优惠券数据失败\", error);\r\n        this.$message.error('重新加载优惠券数据失败: ' + error.response.data);\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n    addComplete() {\r\n      this.showAddCouponDialog = false;\r\n      this.refreshCoupons(); // 重新加载优惠券列表\r\n    },\r\n    confirmDeleteCoupon(row, index) {\r\n      this.selectRow = row;\r\n      this.selectIndex = index;\r\n      this.confirmDeleteDialogVisible = true;\r\n    },\r\n    async deleteCouponConfirm() {\r\n      const couponId = this.selectRow.coupon_id;\r\n      try {\r\n        const response = await axios.delete(`http://localhost:8081/coupon/delete/${couponId}`);\r\n        if (response.status === 200) {\r\n          this.$message.success('优惠券删除成功');\r\n          await this.refreshCoupons(); // 重新加载优惠券列表\r\n          this.showCoupons = this.activeTab === 'all' ? this.platformCoupons : this.platformCoupons.filter(item => item.coupon_status === this.activeTab);\r\n        } else {\r\n          this.$message.error('优惠券删除失败');\r\n        }\r\n      } catch (error) {\r\n        this.$message.error(error.response.data);\r\n      } finally {\r\n        this.confirmDeleteDialogVisible = false;\r\n      }\r\n    },\r\n    editCoupon(row,index){\r\n      this.selectRow = row;\r\n      this.selectIndex = index;\r\n      this.editCouponForm = { ...row }; // 深拷贝行数据到表单\r\n      this.editPendingCouponDialogVisible = true;\r\n    },\r\n    editCoupon2(row,index){\r\n      this.selectRow = row;\r\n      this.selectIndex = index;\r\n      this.editCouponForm = { ...row }; // 深拷贝行数据到表单\r\n      this.editActiveCouponDialogVisible = true;\r\n    },\r\n    submitEditPendingCoupon() {\r\n      this.$refs.editPendingCouponForm.validate(async (valid) => {\r\n        if (valid) {\r\n          try {\r\n            const couponData = {\r\n              \"coupon_id\":this.editCouponForm.coupon_id,\r\n              \"start_time\": moment(this.editCouponForm.start_time).format('YYYY-MM-DD HH:mm:ss'),\r\n              \"end_time\": moment(this.editCouponForm.end_time).format('YYYY-MM-DD HH:mm:ss'),\r\n              \"request\": this.editCouponForm.request,\r\n              \"off\": this.editCouponForm.off,\r\n              \"total\": this.editCouponForm.total,\r\n              \"claim_limit\": this.editCouponForm.claim_limit,\r\n              \"max_unused_count\":this.editCouponForm.max_unused_count,\r\n            };\r\n            const response = await axios.post('http://localhost:8081/coupon/update/pending', couponData);\r\n            if (response.status === 200) {\r\n              this.$message.success('未生效优惠券修改成功');\r\n              this.editPendingCouponDialogVisible = false;\r\n              await this.refreshCoupons(); // 重新加载优惠券列表\r\n            } else {\r\n              this.$message.error(response.data);\r\n            }\r\n          } catch (error) {\r\n            this.$message.error('未生效优惠券修改失败: ' + error.response.data);\r\n          }\r\n        }\r\n      });\r\n    },\r\n    submitEditActiveCoupon() {\r\n      this.$refs.editActiveCouponForm.validate(async (valid) => {\r\n        if (valid) {\r\n          try {\r\n            const couponData = {\r\n              \"coupon_id\":this.editCouponForm.coupon_id,\r\n              \"total\": this.editCouponForm.total,\r\n              \"claim_limit\": this.editCouponForm.claim_limit,\r\n              \"max_unused_count\":this.editCouponForm.max_unused_count,\r\n            };\r\n            const response = await axios.post('http://localhost:8081/coupon/update/active', couponData);\r\n            if (response.status === 200) {\r\n              this.$message.success('已生效优惠券修改成功');\r\n              this.editActiveCouponDialogVisible = false;\r\n              await this.refreshCoupons(); // 重新加载优惠券列表\r\n            } else {\r\n              this.$message.error(response.data);\r\n            }\r\n          } catch (error) {\r\n            this.$message.error('已生效优惠券修改失败: ' + error.response.data);\r\n          }\r\n        }\r\n      });\r\n    },\r\n    pauseCoupon(row, index) {\r\n      this.selectRow = row;\r\n      this.selectIndex = index;\r\n      this.pauseCouponDialogVisible = true;\r\n    },\r\n    submitPauseCoupon() {\r\n      const couponId = this.selectRow.coupon_id;\r\n      axios.put(`http://localhost:8081/coupon/pause?coupon_id=${couponId}`)\r\n          .then(response => {\r\n            if (response.status === 200) {\r\n              this.$message.success('优惠券暂停发放成功');\r\n              this.pauseCouponDialogVisible = false;\r\n              this.refreshCoupons(); // 重新加载优惠券列表\r\n            } else {\r\n              this.$message.error(response.data);\r\n            }\r\n          })\r\n          .catch(error => {\r\n            this.$message.error('优惠券暂停发放失败: ' + error.response.data);\r\n          });\r\n    },\r\n    resumeCoupon(row, index) {\r\n      this.selectRow = row;\r\n      this.selectIndex = index;\r\n      this.resumeCouponDialogVisible = true;\r\n    },\r\n    submitResumeCoupon() {\r\n      const couponId = this.selectRow.coupon_id;\r\n      axios.put(`http://localhost:8081/coupon/resume?coupon_id=${couponId}`)\r\n          .then(response => {\r\n            if (response.status === 200) {\r\n              this.$message.success('优惠券恢复领取成功');\r\n              this.resumeCouponDialogVisible = false;\r\n              this.refreshCoupons(); // 重新加载优惠券列表\r\n            } else {\r\n              this.$message.error(response.data);\r\n            }\r\n          })\r\n          .catch(error => {\r\n            this.$message.error('优惠券恢复领取失败: ' + error.response.data);\r\n          });\r\n    },\r\n    // 获取优惠券数据\r\n    async getAllPlatformCoupons(){\r\n      this.loading = true;\r\n      this.user_id=this.$store.getters.userId;\r\n      console.log(\"当前用户id为：\" + this.user_id);\r\n      try{\r\n        const platformCouponsResponse = await axios.get('http://localhost:8081/coupon/platform');\r\n        if(platformCouponsResponse.data!=null){\r\n          this.platformCoupons = platformCouponsResponse.data;\r\n          console.log(\"platform:\",this.platformCoupons);\r\n          //不需要扁平化\r\n          this.showCoupons = this.platformCoupons;\r\n        }\r\n      }catch (error) {\r\n        console.error(\"获取平台优惠券数据失败\", error);\r\n      }finally {\r\n        this.loading = false;\r\n      }\r\n\r\n    },\r\n    handleTabClick(tab) {\r\n      const status = tab.name;\r\n      if(status==='all'){\r\n        this.showCoupons = this.platformCoupons;\r\n      }else{\r\n        this.showCoupons = this.platformCoupons\r\n            .filter(item => item.coupon_status===status);\r\n      }\r\n    },\r\n    numberFormatter(row, column, value) {\r\n      return `${value.toFixed(2)}`;\r\n    },\r\n    // 金额格式化函数，将数字格式化为人民币形式\r\n    currencyFormatter(row, column, value) {\r\n      // 保留两位小数并添加人民币符号\r\n      return `￥${value.toFixed(2)}`;\r\n    },\r\n    // 券的状态\r\n    statusFormatter(row,column,value){\r\n      if(value==='Pending'){\r\n        return \"待生效\";\r\n      }else if(value==='Active'){\r\n        return \"可领取\";\r\n      }else if(value==='Paused'){\r\n        return \"暂停领取\";\r\n      }else if(value==='Expired'){\r\n        return \"已失效\";\r\n      }else {\r\n        return \"未知状态\";\r\n      }\r\n    },\r\n    // 查看券的可用范围\r\n    async viewCouponRange(row,index) {\r\n      this.selectIndex = index+1;\r\n      const couponId = row.coupon_id; // 获取当前行的 coupon_id\r\n      try {\r\n        const response = await axios.get(`http://localhost:8081/userCoupon/scope/details?coupon_id=${couponId}`);\r\n        const scopeDetails = response.data;\r\n        // 这里只有平台券\r\n        this.platformScopeData = scopeDetails.platform || [];\r\n        console.log(\"platform:\",this.platformScopeData);\r\n        this.platformCouponDialogVisible = true; // 显示平台券弹窗\r\n\r\n        // 这里只有店铺券\r\n        // this.shopScopeData = scopeDetails.shop || [];\r\n        // console.log(\"shop:\",this.shopScopeData);\r\n        // this.shopCouponDialogVisible = true; // 显示店铺券弹窗\r\n      } catch (error) {\r\n        console.error(\"获取范围数据失败:\", error);\r\n      }\r\n    },\r\n    // 清空平台券数据\r\n    clearPlatformScopeData() {\r\n      this.platformScopeData = [];\r\n    },\r\n    // 清空店铺券数据\r\n    clearShopScopeData() {\r\n      this.shopScopeData = [];\r\n    },\r\n    parseJson(str) {\r\n      return JSON.parse(str);\r\n    },\r\n  },\r\n  created() {\r\n    console.log('平台优惠券数据加载开始');\r\n    this.getAllPlatformCoupons();\r\n    console.log('平台优惠券数据加载完成');\r\n    // 模拟从后端获取数据\r\n    this.loading = false;\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n.el-button-group {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 5px; /* 添加按钮之间的间距 */\r\n}\r\n\r\n.el-button-group > .el-button {\r\n  margin: 0; /* 移除按钮的外边距 */\r\n}\r\n/* 将按钮容器右对齐 */\r\n.button-container {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  margin-bottom: 20px; /* 和内容保持适当间距 */\r\n}\r\n\r\n.user-coupons-container {\r\n  width: 100%;\r\n}\r\n\r\n.user-coupons-page {\r\n  background-color: #f5f5f5;\r\n  padding: 20px 0;\r\n  min-height: calc(100vh - 120px);\r\n}\r\n\r\n.coupons-container {\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  padding: 0 20px;\r\n\r\n  h2 {\r\n    margin-bottom: 20px;\r\n    font-size: 24px;\r\n    font-weight: normal;\r\n  }\r\n}\r\n\r\n.coupon-list {\r\n  .coupon-item {\r\n    background: white;\r\n    bcoupon-radius: 8px;\r\n    margin-bottom: 20px;\r\n    overflow: hidden;\r\n\r\n    .coupon-header {\r\n      padding: 15px 20px;\r\n      bcoupon-bottom: 1px solid #eee;\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n\r\n      .coupon-info {\r\n        .coupon-id {\r\n          margin-right: 20px;\r\n          color: #666;\r\n        }\r\n\r\n        .coupon-date {\r\n          color: #999;\r\n        }\r\n      }\r\n\r\n      .coupon-status {\r\n        color: #ff6700;\r\n        font-weight: bold;\r\n      }\r\n    }\r\n\r\n    .coupon-products {\r\n      padding: 20px;\r\n\r\n      .product-item {\r\n        display: flex;\r\n        gap: 15px;\r\n        padding: 10px 0;\r\n\r\n        img {\r\n          width: 80px;\r\n          height: 80px;\r\n          object-fit: cover;\r\n          bcoupon-radius: 4px;\r\n        }\r\n\r\n        .product-info {\r\n          flex: 1;\r\n\r\n          h4 {\r\n            margin: 0 0 5px;\r\n            font-size: 14px;\r\n          }\r\n\r\n          .product-spec {\r\n            color: #999;\r\n            font-size: 12px;\r\n            margin-bottom: 5px;\r\n          }\r\n\r\n          .product-price {\r\n            .price {\r\n              color: #ff6700;\r\n              font-weight: bold;\r\n              margin-right: 10px;\r\n            }\r\n\r\n            .quantity {\r\n              color: #999;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    .coupon-footer {\r\n      padding: 15px 20px;\r\n      bcoupon-top: 1px solid #eee;\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n\r\n      .coupon-total {\r\n        color: #666;\r\n\r\n        .total-price {\r\n          color: #ff6700;\r\n          font-weight: bold;\r\n          font-size: 18px;\r\n        }\r\n      }\r\n\r\n      .coupon-actions {\r\n        display: flex;\r\n        gap: 10px;\r\n      }\r\n    }\r\n\r\n    &.highlight {\r\n      animation: highlight 3s;\r\n    }\r\n  }\r\n}\r\n\r\n.empty-state {\r\n  text-align: center;\r\n  padding: 60px 0;\r\n  color: #999;\r\n\r\n  i {\r\n    font-size: 60px;\r\n    margin-bottom: 20px;\r\n  }\r\n}\r\n\r\n@keyframes highlight {\r\n  0% {\r\n    background-color: #fff1f0;\r\n  }\r\n  100% {\r\n    background-color: white;\r\n  }\r\n}\r\n\r\n.pay-method-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 15px;\r\n  padding: 10px 0;\r\n\r\n  .pay-method-btn {\r\n    height: 50px;\r\n    font-size: 16px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    gap: 10px;\r\n\r\n    i {\r\n      font-size: 20px;\r\n    }\r\n  }\r\n}\r\n\r\n.pay-dialog-content {\r\n  text-align: center;\r\n  padding: 20px 0;\r\n\r\n  .pay-type-text {\r\n    font-size: 18px;\r\n    color: #333;\r\n    margin-bottom: 20px;\r\n  }\r\n\r\n  .qr-code {\r\n    width: 200px;\r\n    height: 200px;\r\n    margin: 0 auto 20px;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n\r\n    img {\r\n      max-width: 100%;\r\n      max-height: 100%;\r\n    }\r\n  }\r\n\r\n  .pay-amount {\r\n    font-size: 18px;\r\n    margin-bottom: 15px;\r\n\r\n    .price {\r\n      color: #ff6700;\r\n      font-weight: bold;\r\n    }\r\n  }\r\n\r\n  .pay-tips {\r\n    color: #666;\r\n\r\n    p {\r\n      margin: 5px 0;\r\n\r\n      &.small {\r\n        font-size: 12px;\r\n        color: #999;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.dialog-footer {\r\n  text-align: center;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}