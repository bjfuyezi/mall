{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: 'ProductView',\n  data() {\n    return {\n      activeTab: 'description',\n      quantity: 1,\n      isFavorite: false,\n      product: {\n        id: 1,\n        name: '示例商品',\n        price: 999,\n        originalPrice: 1299,\n        mainImage: 'https://via.placeholder.com/400x400',\n        images: ['https://via.placeholder.com/400x400', 'https://via.placeholder.com/400x400', 'https://via.placeholder.com/400x400'],\n        sales: 1000,\n        reviews: 500,\n        favorites: 200,\n        stock: 100,\n        description: '<p>这里是商品详细介绍...</p>',\n        reviewList: [{\n          id: 1,\n          userName: '用户1',\n          userAvatar: 'https://via.placeholder.com/40',\n          rating: 5,\n          content: '商品很好，很满意！',\n          images: ['https://via.placeholder.com/100x100'],\n          time: '2024-03-20'\n        }]\n      },\n      hotProducts: []\n    };\n  },\n  created() {\n    // 获取路由传递的商品数据\n    const routeProduct = this.$route.state?.product;\n    if (routeProduct) {\n      // 合并路由传递的数据和默认数据\n      this.product = {\n        ...this.product,\n        id: routeProduct.id,\n        name: routeProduct.name,\n        price: Number(routeProduct.price),\n        mainImage: routeProduct.imagePath || this.product.mainImage\n      };\n    }\n    // 如果需要，可以再次请求完整的商品数据\n    this.fetchProductDetail();\n  },\n  methods: {\n    async fetchProductDetail() {\n      try {\n        const response = await this.$axios.get(`/api/products/${this.$route.params.id}`);\n        // 合并API返回的数据\n        this.product = {\n          ...this.product,\n          ...response.data\n        };\n      } catch (error) {\n        console.error('获取商品详情失败:', error);\n      }\n    },\n    addToCart() {\n      this.$message.success('已添加到购物车');\n    },\n    toggleFavorite() {\n      this.isFavorite = !this.isFavorite;\n      this.$message.success(this.isFavorite ? '收藏成功' : '已取消收藏');\n    },\n    quickBuy() {\n      this.$router.push({\n        name: 'order-confirm',\n        query: {\n          productId: this.product.id,\n          quantity: this.quantity\n        }\n      });\n    },\n    previewImage(_url) {\n      this.$msgbox({\n        title: '图片预览',\n        message: ('img', {\n          attrs: {\n            src: _url,\n            style: 'max-width: 100%'\n          }\n        }),\n        showCancelButton: false,\n        confirmButtonText: '关闭'\n      });\n    }\n  }\n};","map":{"version":3,"names":["name","data","activeTab","quantity","isFavorite","product","id","price","originalPrice","mainImage","images","sales","reviews","favorites","stock","description","reviewList","userName","userAvatar","rating","content","time","hotProducts","created","routeProduct","$route","state","Number","imagePath","fetchProductDetail","methods","response","$axios","get","params","error","console","addToCart","$message","success","toggleFavorite","quickBuy","$router","push","query","productId","previewImage","_url","$msgbox","title","message","attrs","src","style","showCancelButton","confirmButtonText"],"sources":["src/views/ProductView.vue"],"sourcesContent":["<template>\r\n    <div class=\"product-page\">\r\n      <div class=\"product-container\">\r\n        <!-- 左侧区域 -->\r\n        <div class=\"product-left\">\r\n          <!-- 商品主要信息 -->\r\n          <div class=\"product-main\">\r\n            <div class=\"product-gallery\">\r\n              <img :src=\"product.mainImage\" :alt=\"product.name\">\r\n              <el-button \r\n                type=\"danger\" \r\n                class=\"quick-buy-btn\"\r\n                size=\"large\"\r\n                @click=\"quickBuy\"\r\n              >\r\n                立即购买\r\n              </el-button>\r\n              <div class=\"thumbnail-list\">\r\n                <img \r\n                  v-for=\"(img, index) in product.images\" \r\n                  :key=\"index\"\r\n                  :src=\"img\"\r\n                  :alt=\"product.name\"\r\n                  @click=\"product.mainImage = img\"\r\n                >\r\n              </div>\r\n            </div>\r\n            <div class=\"product-info\">\r\n              <h1>{{ product.name }}</h1>\r\n              <div class=\"product-price\">\r\n                <span class=\"current-price\">¥{{ product.price.toFixed(2) }}</span>\r\n                <span class=\"original-price\" v-if=\"product.originalPrice\">\r\n                  ¥{{ product.originalPrice.toFixed(2) }}\r\n                </span>\r\n              </div>\r\n              <div class=\"product-stats\">\r\n                <span>销量 {{ product.sales }}</span>\r\n                <span>评价 {{ product.reviews }}</span>\r\n                <span>收藏 {{ product.favorites }}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n  \r\n          <!-- 商品详情标签页 -->\r\n          <div class=\"product-tabs\">\r\n            <el-tabs v-model=\"activeTab\">\r\n              <el-tab-pane label=\"商品介绍\" name=\"description\">\r\n                <div class=\"product-description\">\r\n                  <div v-html=\"product.description\"></div>\r\n                </div>\r\n              </el-tab-pane>\r\n              <el-tab-pane label=\"商品评价\" name=\"reviews\">\r\n                <div class=\"product-reviews\">\r\n                  <div class=\"review-item\" v-for=\"review in product.reviewList\" :key=\"review.id\">\r\n                    <div class=\"review-header\">\r\n                      <img :src=\"review.userAvatar\" :alt=\"review.userName\">\r\n                      <span class=\"user-name\">{{ review.userName }}</span>\r\n                      <el-rate v-model=\"review.rating\" disabled></el-rate>\r\n                    </div>\r\n                    <div class=\"review-content\">{{ review.content }}</div>\r\n                    <div class=\"review-images\" v-if=\"review.images && review.images.length\">\r\n                      <img v-for=\"(img, index) in review.images\" \r\n                           :key=\"index\" \r\n                           :src=\"img\" \r\n                           @click=\"previewImage(img)\"\r\n                      >\r\n                    </div>\r\n                    <div class=\"review-time\">{{ review.time }}</div>\r\n                  </div>\r\n                </div>\r\n              </el-tab-pane>\r\n            </el-tabs>\r\n          </div>\r\n        </div>\r\n  \r\n        <!-- 右侧区域 -->\r\n        <div class=\"product-right\">\r\n          <!-- 购买操作区 -->\r\n          <div class=\"product-action\">\r\n            <div class=\"quantity-selector\">\r\n              <span>购买数量：</span>\r\n              <el-input-number \r\n                v-model=\"quantity\" \r\n                :min=\"1\" \r\n                :max=\"product.stock\"\r\n              ></el-input-number>\r\n            </div>\r\n            <div class=\"action-buttons\">\r\n              <el-button type=\"primary\" @click=\"addToCart\">加入购物车</el-button>\r\n              <el-button @click=\"toggleFavorite\">\r\n                <i :class=\"isFavorite ? 'el-icon-star-on' : 'el-icon-star-off'\"></i>\r\n                {{ isFavorite ? '已收藏' : '收藏' }}\r\n              </el-button>\r\n            </div>\r\n          </div>\r\n  \r\n          <!-- 热门商品推荐 -->\r\n          <div class=\"hot-products\">\r\n            <h3>热门商品</h3>\r\n            <div class=\"hot-product-list\">\r\n              <div \r\n                v-for=\"item in hotProducts\" \r\n                :key=\"item.id\"\r\n                class=\"hot-product-item\"\r\n                @click=\"$router.push(`/product/${item.id}`)\"\r\n              >\r\n                <img :src=\"item.image\" :alt=\"item.name\">\r\n                <div class=\"hot-product-info\">\r\n                  <p class=\"name\">{{ item.name }}</p>\r\n                  <p class=\"price\">¥{{ item.price.toFixed(2) }}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  export default {\r\n    name: 'ProductView',\r\n    data() {\r\n      return {\r\n        activeTab: 'description',\r\n        quantity: 1,\r\n        isFavorite: false,\r\n        product: {\r\n          id: 1,\r\n          name: '示例商品',\r\n          price: 999,\r\n          originalPrice: 1299,\r\n          mainImage: 'https://via.placeholder.com/400x400',\r\n          images: [\r\n            'https://via.placeholder.com/400x400',\r\n            'https://via.placeholder.com/400x400',\r\n            'https://via.placeholder.com/400x400'\r\n          ],\r\n          sales: 1000,\r\n          reviews: 500,\r\n          favorites: 200,\r\n          stock: 100,\r\n          description: '<p>这里是商品详细介绍...</p>',\r\n          reviewList: [\r\n            {\r\n              id: 1,\r\n              userName: '用户1',\r\n              userAvatar: 'https://via.placeholder.com/40',\r\n              rating: 5,\r\n              content: '商品很好，很满意！',\r\n              images: ['https://via.placeholder.com/100x100'],\r\n              time: '2024-03-20'\r\n            }\r\n          ]\r\n        },\r\n        hotProducts: []\r\n      }\r\n    },\r\n    created() {\r\n      // 获取路由传递的商品数据\r\n      const routeProduct = this.$route.state?.product;\r\n      if (routeProduct) {\r\n        // 合并路由传递的数据和默认数据\r\n        this.product = {\r\n          ...this.product,\r\n          id: routeProduct.id,\r\n          name: routeProduct.name,\r\n          price: Number(routeProduct.price),\r\n          mainImage: routeProduct.imagePath || this.product.mainImage,\r\n        };\r\n      }\r\n      // 如果需要，可以再次请求完整的商品数据\r\n      this.fetchProductDetail();\r\n    },\r\n    methods: {\r\n      async fetchProductDetail() {\r\n        try {\r\n          const response = await this.$axios.get(`/api/products/${this.$route.params.id}`);\r\n          // 合并API返回的数据\r\n          this.product = {\r\n            ...this.product,\r\n            ...response.data\r\n          };\r\n        } catch (error) {\r\n          console.error('获取商品详情失败:', error);\r\n        }\r\n      },\r\n      addToCart() {\r\n        this.$message.success('已添加到购物车')\r\n      },\r\n      toggleFavorite() {\r\n        this.isFavorite = !this.isFavorite\r\n        this.$message.success(this.isFavorite ? '收藏成功' : '已取消收藏')\r\n      },\r\n      quickBuy() {\r\n        this.$router.push({\r\n          name: 'order-confirm',\r\n          query: {\r\n            productId: this.product.id,\r\n            quantity: this.quantity\r\n          }\r\n        });\r\n      },\r\n      previewImage(_url) {\r\n        this.$msgbox({\r\n          title: '图片预览',\r\n          message: ('img', {\r\n            attrs: {\r\n              src: _url,\r\n              style: 'max-width: 100%'\r\n            }\r\n          }),\r\n          showCancelButton: false,\r\n          confirmButtonText: '关闭'\r\n        })\r\n      }\r\n    }\r\n  }\r\n  </script>\r\n  \r\n  <style lang=\"scss\" scoped>\r\n  .product-page {\r\n    background-color: #f5f5f5;\r\n    padding: 20px 0;\r\n  }\r\n  \r\n  .product-container {\r\n    max-width: 1200px;\r\n    margin: 0 auto;\r\n    display: flex;\r\n    gap: 20px;\r\n  }\r\n  \r\n  .product-left {\r\n    flex: 1;\r\n    min-width: 0;\r\n  }\r\n  \r\n  .product-main {\r\n    background: white;\r\n    padding: 20px;\r\n    border-radius: 8px;\r\n    margin-bottom: 20px;\r\n    display: flex;\r\n    gap: 20px;\r\n  }\r\n  \r\n  .product-gallery {\r\n    width: 400px;\r\n    position: relative;\r\n    \r\n    img {\r\n      width: 100%;\r\n      height: auto;\r\n      border-radius: 4px;\r\n    }\r\n  \r\n    .quick-buy-btn {\r\n      position: absolute;\r\n      bottom: 80px;  /* 调整按钮位置，留出缩略图空间 */\r\n      left: 50%;\r\n      transform: translateX(-50%);\r\n      width: 80%;\r\n      height: 50px;\r\n      font-size: 18px;\r\n      opacity: 0;\r\n      transition: opacity 0.3s;\r\n    }\r\n  \r\n    &:hover {\r\n      .quick-buy-btn {\r\n        opacity: 1;\r\n      }\r\n    }\r\n  \r\n    .thumbnail-list {\r\n      display: flex;\r\n      gap: 10px;\r\n      margin-top: 10px;\r\n  \r\n      img {\r\n        width: 60px;\r\n        height: 60px;\r\n        object-fit: cover;\r\n        cursor: pointer;\r\n        border: 2px solid transparent;\r\n  \r\n        &:hover {\r\n          border-color: #ff6700;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  \r\n  .product-info {\r\n    flex: 1;\r\n  \r\n    h1 {\r\n      font-size: 24px;\r\n      margin-bottom: 20px;\r\n    }\r\n  \r\n    .product-price {\r\n      margin-bottom: 20px;\r\n  \r\n      .current-price {\r\n        font-size: 28px;\r\n        color: #ff6700;\r\n        margin-right: 10px;\r\n      }\r\n  \r\n      .original-price {\r\n        color: #999;\r\n        text-decoration: line-through;\r\n      }\r\n    }\r\n  \r\n    .product-stats {\r\n      color: #666;\r\n      \r\n      span {\r\n        margin-right: 20px;\r\n      }\r\n    }\r\n  }\r\n  \r\n  .product-tabs {\r\n    background: white;\r\n    border-radius: 8px;\r\n    padding: 20px;\r\n  \r\n    .product-description {\r\n      padding: 20px 0;\r\n    }\r\n  \r\n    .review-item {\r\n      padding: 20px 0;\r\n      border-bottom: 1px solid #eee;\r\n  \r\n      .review-header {\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 10px;\r\n        margin-bottom: 10px;\r\n  \r\n        img {\r\n          width: 40px;\r\n          height: 40px;\r\n          border-radius: 50%;\r\n        }\r\n      }\r\n  \r\n      .review-images {\r\n        display: flex;\r\n        gap: 10px;\r\n        margin: 10px 0;\r\n  \r\n        img {\r\n          width: 100px;\r\n          height: 100px;\r\n          object-fit: cover;\r\n          cursor: pointer;\r\n        }\r\n      }\r\n  \r\n      .review-time {\r\n        color: #999;\r\n        font-size: 12px;\r\n      }\r\n    }\r\n  }\r\n  \r\n  .product-right {\r\n    width: 300px;\r\n  }\r\n  \r\n  .product-action {\r\n    background: white;\r\n    padding: 20px;\r\n    border-radius: 8px;\r\n    margin-bottom: 20px;\r\n  \r\n    .quantity-selector {\r\n      margin-bottom: 20px;\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 10px;\r\n    }\r\n  \r\n    .action-buttons {\r\n      display: flex;\r\n      flex-direction: column;\r\n      gap: 10px;\r\n  \r\n      .el-button {\r\n        width: 100%;\r\n      }\r\n    }\r\n  }\r\n  \r\n  .hot-products {\r\n    background: white;\r\n    padding: 20px;\r\n    border-radius: 8px;\r\n  \r\n    h3 {\r\n      margin-bottom: 15px;\r\n      font-size: 16px;\r\n    }\r\n  \r\n    .hot-product-item {\r\n      display: flex;\r\n      gap: 10px;\r\n      padding: 10px 0;\r\n      cursor: pointer;\r\n  \r\n      &:hover {\r\n        background: #f9f9f9;\r\n      }\r\n  \r\n      img {\r\n        width: 80px;\r\n        height: 80px;\r\n        object-fit: cover;\r\n        border-radius: 4px;\r\n      }\r\n  \r\n      .hot-product-info {\r\n        flex: 1;\r\n  \r\n        .name {\r\n          margin-bottom: 5px;\r\n          font-size: 14px;\r\n        }\r\n  \r\n        .price {\r\n          color: #ff6700;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  </style> "],"mappings":";AAwHA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,SAAA;MACAC,QAAA;MACAC,UAAA;MACAC,OAAA;QACAC,EAAA;QACAN,IAAA;QACAO,KAAA;QACAC,aAAA;QACAC,SAAA;QACAC,MAAA,GACA,uCACA,uCACA,sCACA;QACAC,KAAA;QACAC,OAAA;QACAC,SAAA;QACAC,KAAA;QACAC,WAAA;QACAC,UAAA,GACA;UACAV,EAAA;UACAW,QAAA;UACAC,UAAA;UACAC,MAAA;UACAC,OAAA;UACAV,MAAA;UACAW,IAAA;QACA;MAEA;MACAC,WAAA;IACA;EACA;EACAC,QAAA;IACA;IACA,MAAAC,YAAA,QAAAC,MAAA,CAAAC,KAAA,EAAArB,OAAA;IACA,IAAAmB,YAAA;MACA;MACA,KAAAnB,OAAA;QACA,QAAAA,OAAA;QACAC,EAAA,EAAAkB,YAAA,CAAAlB,EAAA;QACAN,IAAA,EAAAwB,YAAA,CAAAxB,IAAA;QACAO,KAAA,EAAAoB,MAAA,CAAAH,YAAA,CAAAjB,KAAA;QACAE,SAAA,EAAAe,YAAA,CAAAI,SAAA,SAAAvB,OAAA,CAAAI;MACA;IACA;IACA;IACA,KAAAoB,kBAAA;EACA;EACAC,OAAA;IACA,MAAAD,mBAAA;MACA;QACA,MAAAE,QAAA,cAAAC,MAAA,CAAAC,GAAA,uBAAAR,MAAA,CAAAS,MAAA,CAAA5B,EAAA;QACA;QACA,KAAAD,OAAA;UACA,QAAAA,OAAA;UACA,GAAA0B,QAAA,CAAA9B;QACA;MACA,SAAAkC,KAAA;QACAC,OAAA,CAAAD,KAAA,cAAAA,KAAA;MACA;IACA;IACAE,UAAA;MACA,KAAAC,QAAA,CAAAC,OAAA;IACA;IACAC,eAAA;MACA,KAAApC,UAAA,SAAAA,UAAA;MACA,KAAAkC,QAAA,CAAAC,OAAA,MAAAnC,UAAA;IACA;IACAqC,SAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;QACA3C,IAAA;QACA4C,KAAA;UACAC,SAAA,OAAAxC,OAAA,CAAAC,EAAA;UACAH,QAAA,OAAAA;QACA;MACA;IACA;IACA2C,aAAAC,IAAA;MACA,KAAAC,OAAA;QACAC,KAAA;QACAC,OAAA;UACAC,KAAA;YACAC,GAAA,EAAAL,IAAA;YACAM,KAAA;UACA;QACA;QACAC,gBAAA;QACAC,iBAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}